<!DOCTYPE html>
<html>
<head>
    <title>Barcode Scanner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    <style>
        #scanner-container {
            width: 100%;
            height: 400px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Barcode Scanner</h1>
    <button id="start-scan-btn">Start Scan</button>
    <div id="scanner-container"></div>
    <div id="result"></div>

    <script>
        function startScan() {
            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector('#scanner-container')
                },
                decoder: {
                    readers: ["code_128_reader"] // Specify the barcode types you want to scan
                }
            }, function (err) {
                if (err) {
                    console.log(err);
                    return;
                }
                console.log("Initialization finished. Ready to start");
                Quagga.start();
            });

            Quagga.onDetected(function (result) {
                var code = result.codeResult.code;
                document.getElementById('result').innerText = 'Scanned Barcode: ' + code;
                Quagga.stop();
                sendBarcodeToSalesforce(code);
            });
        }

        function sendBarcodeToSalesforce(code) {
            <!-- var xhr = new XMLHttpRequest();
            var url = 'https://your-salesforce-org.my.salesforce.com/services/apexrest/yourEndpoint'; // Replace with your Salesforce REST API endpoint
            xhr.open('POST', url, true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Authorization', 'Bearer ' + 'your_access_token'); // Replace with your Salesforce access token
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    console.log('Barcode sent to Salesforce successfully.');
                }
            };
            var data = JSON.stringify({ "barcode": code });
            xhr.send(data); -->
            console.log('code is ');
            console.log(code);
        }

        document.getElementById('start-scan-btn').addEventListener('click', startScan);
    </script>
</body>
</html>
